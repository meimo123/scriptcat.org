(self.webpackChunkscriptcat_org=self.webpackChunkscriptcat_org||[]).push([[675],{4499:(e,n,a)=>{"use strict";a.r(n),a.d(n,{data:()=>s});const s={key:"v-090359c2",path:"/dev/subscribe.html",title:"订阅模式",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"静默安装/更新",slug:"静默安装-更新",children:[]},{level:3,title:"自身",slug:"自身",children:[]},{level:2,title:"metadata",slug:"metadata",children:[{level:3,title:"name",slug:"name",children:[]},{level:3,title:"description",slug:"description",children:[]},{level:3,title:"version",slug:"version",children:[]},{level:3,title:"connect",slug:"connect",children:[]},{level:3,title:"scriptUrl",slug:"scripturl",children:[]}]}],filePathRelative:"dev/subscribe.md",git:{updatedTime:1630718406e3,contributors:[]}}},8514:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>c});const s=(0,a(6252).uE)('<h1 id="订阅模式" tabindex="-1"><a class="header-anchor" href="#订阅模式" aria-hidden="true">#</a> 订阅模式</h1><p>注释开头与结尾使用<code>UserSubscribe</code>，使用<code>user.sub.js</code>(非强制)后缀或者使用链接进行导入安装，必须使用<code>https</code>链接。</p><p>订阅脚本仅会在安装时弹出安装界面由用户确认订阅，但后续的更新采用静默更新的方式，除非<code>connect</code>权限发生改变，否则不会弹出更新界面由用户确认。</p><p>一个订阅脚本可以描述所需要的多个脚本的安装链接，通过订阅模式安装的脚本使用静默安装模式，不会弹出确认安装页面，所安装的脚本也会展示在脚本列表中，但是<code>connect</code>权限会使用订阅中所声明的<code>connect</code>，而不会使用脚本自身的<code>connect</code>权限。</p><p>订阅脚本每次更新或者变化会使用脚本链接与已安装的脚本进行比对，新订阅的链接中没有的会进行删除，新增的会进行安装。脚本的更新通过脚本自身的<code>version</code>去进行静默更新。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ==UserSubscribe==</span>\n<span class="token comment">// @name         xxx</span>\n<span class="token comment">// @description  订阅xxx系列脚本</span>\n<span class="token comment">// @version      0.1.0</span>\n<span class="token comment">// @author       You</span>\n<span class="token comment">// @grant        GM_xmlhttpRequest</span>\n<span class="token comment">// @connect      www.baidu.com</span>\n<span class="token comment">// @scriptUrl    https://script.tampermonkey.net.cn/48.user.js</span>\n<span class="token comment">// @scriptUrl    https://script.tampermonkey.net.cn/49.user.js</span>\n<span class="token comment">// ==/UserSubscribe==</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="静默安装-更新" tabindex="-1"><a class="header-anchor" href="#静默安装-更新" aria-hidden="true">#</a> 静默安装/更新</h3><p>平常的<code>.user.js</code>用户脚本安装或者更新都需要进行权限和变更的确认。</p><p>订阅使用静默的方式，静默安装/更新仅会弹出一个通知，不会再次由用户进行确认。由于静默更新的机制，请选择安全且值得信任的订阅方。</p><h3 id="自身" tabindex="-1"><a class="header-anchor" href="#自身" aria-hidden="true">#</a> 自身</h3><p>脚本自身可以同时为订阅脚本与用户脚本，只需要在<code>metadata</code>中增加一个<code>@script</code>为自身的链接。</p><h2 id="metadata" tabindex="-1"><a class="header-anchor" href="#metadata" aria-hidden="true">#</a> metadata</h2><p>订阅脚本中的某些metadata含义也将发生改变</p><h3 id="name" tabindex="-1"><a class="header-anchor" href="#name" aria-hidden="true">#</a> name</h3><p>订阅名称（在订阅列表中也可以自行进行修改）</p><h3 id="description" tabindex="-1"><a class="header-anchor" href="#description" aria-hidden="true">#</a> description</h3><p>订阅描述，用于描述本订阅所作用途</p><h3 id="version" tabindex="-1"><a class="header-anchor" href="#version" aria-hidden="true">#</a> version</h3><p>订阅版本，如果忽略则将使用订阅脚本的内容是否发生改变去更新</p><h3 id="connect" tabindex="-1"><a class="header-anchor" href="#connect" aria-hidden="true">#</a> connect</h3><p>获取网站的访问权限,请看<code>GM_cookie</code>和<code>GM_xmlhttpRequest</code>，通过订阅模式所安装的脚本中的<code>connect</code>会被订阅的<code>connect</code>所覆盖</p><h3 id="scripturl" tabindex="-1"><a class="header-anchor" href="#scripturl" aria-hidden="true">#</a> scriptUrl</h3><p>订阅所需要安装的脚本链接</p>',23),c={render:function(e,n){return s}}}}]);